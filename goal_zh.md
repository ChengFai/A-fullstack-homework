# **作业**

## **1. 问题描述**

Contoso Ltd（一家公司）需要一种方式让员工和雇主跟踪支出（"报销"）。具体来说，系统中有两组用户：员工和雇主，并且：

**员工**：

○ 创建"票据" - 代表购买记录，包含何时、谁、花费了多少钱，以及购买相关链接的字段

○ 无法看到其他人创建的票据

**雇主**：

○ 可以看到所有人的票据作为长列表

○ 可以批准或拒绝票据

○ 可以暂停员工，使该员工无法使用相同邮箱再次登录，属于该员工的票据将被隐藏（但仍存在于数据库中，软删除，可以随意添加某种标志来实现这种软删除行为）

您的任务是编写一个面向两个用户组的端到端产品，应包含以下页面：

**登录页面**

○ 用户通过**邮箱**唯一标识

○ 提示用户输入邮箱和密码。唯一的操作按钮是"登录/注册"

■ 如果是现有用户，密码错误则拒绝登录

■ 如果是新用户，对密码进行哈希处理，询问用户希望扮演的角色以及用户名。一旦使用上述信息创建用户，就登录

● **票据列表页面**

○ 员工：

■ 选择向票据列表添加新条目，列表应仅显示属于当前员工的票据

○ 雇主：

■ 看到所有人的票据

■ 可以批准/拒绝票据

● **员工列表页面**

○ 仅对雇主可见

○ 雇主选择暂停和重新激活员工。被禁用的员工无法登录，**任何人**都无法在票据列表页面上看到他们的票据

## **2. 技术栈要求**

● **后端**：使用**Python**编写

○ **环境设置**：Astral UV，[这里是教程](https://docs.astral.sh/uv/getting-started/)

○ **Python**：FastAPI + SQLAlchemy + asyncpg

■ FastAPI：[https://fastapi.tiangolo.com/](https://fastapi.tiangolo.com/)

■ 是的，请使用PostgreSQL作为数据库

○ **必须能够处理发送到同一端点的多个并发/并行请求。因此我们要求通过FastAPI使用asyncio。**

● **前端**：**TypeScript + React**

○ **PNPM**用于包管理

○ **Vite + ESBuild**用于构建

○ **React Router**：路由

○ **TailwindCSS**用于样式

○ **Redux**用于状态管理（可选）

## **3. 交付物**

一个包含前端和后端的github或gitee仓库，结构如下：

```
README.md
frontend/
  package.json
  pnpm.lock
  src/
    (您的前端源文件)
  public/
    (前端资源)
backend/
  uv.lock
  pyproject.toml
  src/
    (后端源文件)
```

其中README.md应包含：

● 如何设置数据库

● 如何安装包并运行您的后端和前端

● （见下面的奖励任务，一些内容也写入README.md）

## **IV. 奖励任务！**

以下任务完全可选，但将为小型项目增加价值，这反过来让我们更好地了解您的编码风格

● **单元测试或集成测试**：对于后端，使用unittest编写一些测试

○ 至少，设置测试脚手架并在README.md中解释如何运行您的测试

○ 尝试进行一些链式集成测试，您对某个资源发出GET请求，然后发出POST请求以某种方式更新它，并使用GET验证事务是否成功

● **样式**

○ **后端**：设置python格式化工具black。在README.md中提供如何使用它的简要教程

○ **前端**：设置prettier。在package.json中包含脚本并在README.md中提供适当的说明

● **认证**

● **Docker部署**
